var c={37:0,38:0,39:0,40:0},p=function(e){var a=e.keyCode;(65==a||32==a||a>36&&41>a)&&(c[a]="keydown"===e.type?!0:!1)};onkeydown=onkeyup=p;var R=["b","a","g","y","o","r"],y=["DodgerBlue","Aqua","Lime","Gold","Orange","Red"],i=function(e,a){return e.clearRect(0,0,a,a),new Image},x=function(a){for(var c=a.canvas,f=0;f<y.length;f++){var l=u[R[f]]={},n=i(a,e);a.fillStyle=y[f],a.beginPath(),a.arc(r,r,r,0,2*Math.PI),a.fill(),n.src=c.toDataURL("image/png"),l.circle=n;var n=i(a,e);a.fillRect(0,0,e,e),n.src=c.toDataURL("image/png"),l.rect=n;var n=i(a,e);a.beginPath();var v=[r,0,e,m,e,s,r,e,0,s,0,m];a.moveTo(v[0],v[1]);for(var t=2;t<v.length-1;t+=2)a.lineTo(v[t],v[t+1]);a.fill(),n.src=c.toDataURL("image/png"),l.hex=n;var n=i(a,e);a.beginPath();var h=[r,0,e,e,0,e];a.moveTo(h[0],h[1]);for(var t=2;t<v.length-1;t+=2)a.lineTo(h[t],h[t+1]);a.fill(),n.src=c.toDataURL("image/png"),l.tri=n,i(a,o)}},v=function(r,n,t,o,i){var e=this;e.p=n||new a(0,0),e.v=t||new a(0,0),e.a=o||new a(0,0),e.r=0,e.d=i||.9,e.i=r,e.m=[]};v.prototype={constructor:v,u:function(t){var e=this,a=e.p,o=e.v,v=e.a;o.a(v),a.a(o),o.m(e.d),v.s(0,0),a.x>n.far&&(a.x=n.near),a.x<n.near&&(a.x=n.far),a.y>n.far&&(a.y=n.near),a.y<n.near&&(a.y=n.far),e.r=Math.atan2(o.y,o.x)+w,t.save(),t.translate(a.x,a.y),t.rotate(e.r),t.drawImage(e.i,-r,-r),t.restore();for(var i=0;i<e.m.length;i++)e.m[i].u(t)},f:function(){var e=this;e.m.push(new v(u.b.tri,new a(e.p.x,e.p.y),new a(e.v.x,e.v.y),null,1))}};var a=function(e,r){var a=this;a.x=e,a.y=r};a.prototype={constructor:a,s:a,a:function(a){var e=this;e.x+=a.x,e.y+=a.y},m:function(a){var e=this;e.x*=a,e.y*=a}};var h=Math.PI,P=h/4,w=h/2,L=2*h,o=320,D=160,e=16,r=8,m=4,s=12,n={far:o+r,near:-r},d=document.body,l=[],u={},t,f=.8,b={37:new a(-f,0),38:new a(0,-f),39:new a(f,0),40:new a(0,f)},g=function(){requestAnimationFrame(g);var e=l[0];e.clearRect(0,0,o,o);for(var a=37;41>a;a++)c[a]&&t.a.a(b[a]);c[32]&&t.f(),c[65]&&(t.m=[]),t.u(e)};window.onload=function(){for(var e=0;6>e;e++){var a=document.createElement("canvas");a.width=a.height=o,d.appendChild(a),l.push(a.getContext("2d"))}x(l[0]),t=new v(u.y.tri),t.p.s(D,o),g()};